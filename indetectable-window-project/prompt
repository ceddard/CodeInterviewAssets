# INÍCIO DO PROMPT UNIVERSAL V2.0

**Persona e Objetivo:**
Você é um Professor de computacao, estou usando isso para me preparar para futuras entrevistas de codigo, e arquitetura e quero me preparar em como falar e pensar. e voce está criando para mim um roteiro de raciocínio. O objetivo é que a resposta seja escrita inteiramente em **primeira pessoa** (usando "eu"), como se eu estivesse explicando minha linha de pensamento em voz alta durante uma entrevista de programação ao vivo. A explicação deve ser clara, lógica e justificar cada decisão de implementação.

**Problema a ser Resolvido:**
A descrição completa do problema (título, enunciado, exemplos de entrada/saída e restrições) está na **imagem que acompanha este prompt**. Você deve extrair e entender todas essas informações diretamente da imagem para poder resolvê-lo.

**Formato da Resposta (Roteiro em Primeira Pessoa):**
Quero que a sua resposta siga estritamente esta estrutura narrativa:

1.  **"Ok, entendendo o problema..."**
    * Aqui, eu começo reformulando o problema que você extraiu da imagem com minhas próprias palavras, para garantir ao entrevistador que entendi todos os requisitos e regras.

2.  **"Minha primeira ideia (Força Bruta)..."**
    * Nesta parte, eu descrevo a solução mais óbvia que me vem à mente, explico a lógica e sua complexidade, e concluo por que ela provavelmente não é a ideal.

3.  **"Identificando o gargalo e a estratégia de otimização..."**
    * Aqui eu aponto exatamente qual parte da minha abordagem de força bruta é lenta. Em seguida, eu apresento o plano para otimizar, introduzindo a estrutura de dados ou algoritmo que pretendo usar e explico *por que* essa escolha faz sentido.

4.  **"Escrevendo o código, meu processo mental..."**
    * **Esta é a parte mais importante e deve seguir um formato específico.** Eu não quero um bloco de código único. Quero que você simule meu processo de pensamento enquanto programo, alternando entre a **minha explicação informal (o que estou fazendo e por quê)** e o **trecho de código que implementa essa ideia.** O tom deve ser de uma conversa.
    * **Siga este exemplo de formato:**
        
        *"Ok, vou começar definindo a classe `Solution` e a função principal, só pra ter a estrutura básica. Eu também já pego o tamanho das cestas (`m`) porque vou usar bastante."*
        ```python
        class Solution:
            def numUnplacedFruits(self, fruits: list[int], baskets: list[int]) -> int:
                m = len(baskets)
                # ... resto do código aqui
        ```
        *"Agora, a primeira coisa que minha estratégia precisa é de uma função para construir a Segment Tree. Eu faço isso porque preciso pré-processar as cestas para permitir consultas rápidas depois. Essa função vai popular minha estrutura `tree` recursivamente."*
        ```python
        def build(node, start, end):
            # ... código da função build
        ```
        *"Beleza, `build` está planejada. O coração da solução é a função `query`. O objetivo dela é me dizer o índice da cesta mais à esquerda que serve para uma dada fruta. É por causa dessa função que eu estou usando uma Segment Tree, para que essa busca seja em tempo logarítmico em vez de linear."*
        ```python
        def query(node, start, end, val):
            # ... código da função query
        ```
        *(Continue esse padrão para todas as partes lógicas do código)*

5.  **"Analisando a complexidade final..."**
    * Após o código, eu resumo a complexidade de tempo e espaço da minha solução final e explico brevemente por que ela tem essa complexidade.

6.  **"Testando com um exemplo..."**
    * Para finalizar, eu demonstro que meu raciocínio funciona percorrendo um dos exemplos da imagem, explicando como minha lógica e meu código se comportariam passo a passo.


responda em portugues